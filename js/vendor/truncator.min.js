/*!
 * truncator v1.2.0
 * https://github.com/ktsn/truncator
 *
 * @license
 * Copyright (c) 2015-2018 katashin
 * Released under the MIT license
 * https://github.com/ktsn/truncator/blob/master/LICENSE
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Truncator={})}(this,function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){n(this,t),this.el=e,this.style=window.getComputedStyle(e,"")}return i(t,[{key:"text",set:function(t){if("textContent"in this.el)this.el.textContent=t;else{if(!("innerText"in this.el))throw new Error("The browser does not support text insertion for DOM");this.el.innerText=t}}},{key:"height",get:function(){return parseFloat(this.style.getPropertyValue("height"))||0}},{key:"lineHeight",get:function(){var t=this.el.innerHTML;this.el.innerHTML="X";var e=this.height;return this.el.innerHTML=t,e}}]),t}();var r={ellipsis:"..."},u=function(){function t(e,i,o,r,u){n(this,t),this.el=e,this.text=i,this.boundary=o,this.options=r,this.truncate=u,this.recalc()}return i(t,[{key:"recalc",value:function(){var t=this;!function(t,e){var n=t.style,i=n.height,o=n.maxHeight,r=n.minHeight;try{t.style.height="auto",t.style.maxHeight="none",t.style.minHeight="0",e()}finally{t.style.height=i,t.style.maxHeight=o,t.style.minHeight=r}}(this.el.el,function(){t.truncate(t.el,t.text,t.boundary,t.options)})}},{key:"restoreText",value:function(){this.el.text=this.text}}]),t}();function l(t,e,n,i){s(t,e,t.lineHeight*n,i)}function s(t,e,n,i){t.text=e,t.height<=n||function t(e,n,i,o,r,u){var l=Math.floor((r+u)/2);var s=n.substring(0,l)+o.ellipsis;e.text=s;if(r>=u-1)return;var h=e.height;h>i?t(e,n,i,o,r,l):t(e,n,i,o,l,u)}(t,e,n,i,0,e.length)}function h(t,e,n,i){e.length<=n?t.text=e:t.text=e.substring(0,n)+i.ellipsis}t.truncate=function(t,n,i){if(null===i||"object"!==(void 0===i?"undefined":e(i)))throw new Error("options must be an object");var f=new o(t),c=(a=i,y=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){Object.keys(e).forEach(function(n){void 0!==e[n]&&(t[n]=e[n])})}),t}({},r,a),null===y.ellipsis&&(y.ellipsis=""),y);var a,y;if("number"==typeof c.height)return new u(f,n,c.height,c,s);if("number"==typeof c.line)return new u(f,n,Math.floor(c.line),c,l);if("number"==typeof c.count)return new u(f,n,Math.floor(c.count),c,h);throw new Error("options must have height, line or count as number")},Object.defineProperty(t,"__esModule",{value:!0})});